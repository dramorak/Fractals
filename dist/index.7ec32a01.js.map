{"mappings":"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","sources":["init.js"],"sourcesContent":["/* ++++++++++++++++++++++++++++++++++++++++++++++++++++\n Object/Function definition page \n+++++++++++++++++++++++++++++++++++++++++++++++++++++++ */\n\nvar startRender = true;\nvar test = false;\n\nvar sin = Math.sin;\nvar cos = Math.cos;\nvar objectRenderArray = [];\n\nvar meta = {\n  // stores relevant information about the current drawstyle.\n  style: Line,\n  colorStyle: \"drawColor\",\n  thickness: 2, // thickness of lines (only applies to stroke type objects)\n  drawColor: new Color(0, 0, 0), // color of drawn objects\n  backgroundColor: new Color(255, 255, 255), // background color\n  fillStyle: \"stroke\", // outline vs fill\n  clrscale: 16, //controls color fading. Higher value indicates slower fading.\n  fadeVal: 0.56, // controls how quickly colors fade into the fractal.\n\n  renderThreshold: 1, // limits drawing of objects to those whose sizes are larger than this value\n  maxDepth: 100, // limits max depth. Sort of deprecated, switched to size limitation.\n  maxScale: 0.98, // limits the max scale of a transformation. Must be less than one, otherwise it won't converge, and the program will run infinitely.\n  maxSize: 10000, // deprecated\n  operationLimit: 6000, // number of draw operations called in a single frame.\n  unit: 200, // 1 unit is defined as 100 pixels.\n};\nvar metaCopy = {...meta}; //copy original state, in case we need to restore later.\n\nvar fractal = {\n  objects: [],\n  branches: [],\n  contexts: [],\n  drawState: {\n    opcount: 0, // counts the number of operations done this frame.\n    i: 0, // context counter number\n    stack: [], // stack\n  },\n  draw: function () {\n    // draw top elements first\n\n    while (fractal.drawState.i < fractal.objects.length) {\n      // Trunk section\n      //  push local state onto stack, if empty.\n      if (fractal.drawState.stack.length == 0) {\n        fractal.drawState.stack.push(fractal.objects[fractal.drawState.i]);\n        fractal.drawState.stack.push(0);\n      }\n      //  Note: The 'local state' of the stack are 2 values: The node to be drawn, and a number representing the number of branches yet to be drawn.\n      while (fractal.drawState.stack.length > 0) {\n        node = fractal.drawState.stack[fractal.drawState.stack.length - 2];\n        i = fractal.drawState.stack[fractal.drawState.stack.length - 1];\n\n        if (node.size < meta.renderThreshold) {\n          // if the node is too small.\n          fractal.drawState.stack.pop();\n          fractal.drawState.stack.pop();\n          continue;\n        }\n        if (i == 0) {\n          // if It's the first time encountering this node.\n          node.draw(fractal.contexts[fractal.drawState.i]);\n          fractal.drawState.opcount += Math.max(1, node.points.length - 1); // number of lines in the image\n        }\n        if (i == fractal.branches.length) {\n          // If all children of this node have been drawn\n          // pop last two element off, and continue.\n          fractal.drawState.stack.pop();\n          fractal.drawState.stack.pop();\n          continue;\n        } else {\n          //otherwise\n\n          //update current node drawn number\n          fractal.drawState.stack[fractal.drawState.stack.length - 1] += 1;\n\n          //push new node onto the stack\n          let trans = fractal.branches[i].transformation;\n          fractal.drawState.stack.push(trans.apply(node)); // push new node on\n          fractal.drawState.stack.push(0); // push todo variable.\n        }\n        //If oplimit has been reached, stop drawing.\n        if (fractal.drawState.opcount >= meta.operationLimit) {\n          fractal.drawState.opcount = 0;\n          return;\n        }\n      }\n\n      // set opcount to 0 for the next draw\n      fractal.drawState.opcount = 0;\n      // increment fractal.drawState.i\n      fractal.drawState.i += 1;\n    }\n  },\n\n  resetState: function () {\n    fractal.drawState.opcount = 0;\n    fractal.drawState.i = 0;\n    fractal.drawState.stack = [];\n  },\n\n  push: function (\n    start,\n    end,\n    type = \"unspecified\",\n    drawColor = black,\n    thickness = 1,\n    fillStyle = \"stroke\",\n    fade = 0\n  ) {\n    if (type == \"unspecified\") {\n      type = meta.style;\n    }\n\n    if (type == Branch) {\n      //NOTE Introducing a new branch is a violent process. I'll probably have to clear all of the contexts.\n\n      //Clear all canvases (necessary?)\n      fractal.contexts.forEach((ctx) => clear(ctx));\n\n      //reset the fractal.drawState\n      fractal.resetState();\n\n      //Add a transformation to fractal.branches\n      fractal.branches.push(\n        new Branch(\n          Transformation.generateTransformation1(\n            start,\n            end,\n            meta.unit,\n            drawColor,\n            fade\n          )\n        )\n      );\n    } else {\n      // drawobject\n      //create a canvas\n      const ctx = createCanvas();\n\n      //modify it's transform\n      ctx.setTransform(\n        1,\n        0,\n        0,\n        -1,\n        Math.floor(width / 2),\n        Math.floor(height / 2)\n      );\n\n      //add context to the list of contexts.\n      fractal.contexts.push(ctx);\n\n      //push an object onto fractal.objects\n      let trans = Transformation.generateTransformation3(start, end);\n      let new_obj = new type(trans, drawColor, thickness, fillStyle, fade)\n      fractal.objects.push(new_obj);\n\n      //draw the depth 0 object immediately\n      new_obj.draw(ctx);\n    }\n  },\n\n  pop: function (type = \"unspecified\") {\n    if (type == \"unspecified\") {\n      type = meta.style;\n    }\n    // take the current draw style (branch, trunk) and pop.\n    if (type === Branch && fractal.branches.length > 0) {\n      if (fractal.branches.length == 0) {\n        return;\n      }\n      // remove branch from branch list\n      fractal.branches.pop();\n      // reset the fractalState\n      fractal.resetState();\n      // clear all canvases.\n      fractal.contexts.forEach((ctx) => clear(ctx));\n    } else { // if object\n      if (fractal.objects.length == 0) {\n        return;\n      }\n      if (fractal.drawState.i == fractal.objects.length) {\n        // if the object is already drawn\n        fractal.drawState.i -= 1;\n      } else if (fractal.drawState.i == fractal.objects.length - 1) {\n        // if the object being popped is also the object being drawn\n        // stop drawing the current object\n        fractal.drawState.stack = [];\n      }\n      //remove object\n      fractal.objects.pop();\n      //remove the context from array, then delete it.\n      let ctx = fractal.contexts.pop();\n      //ctx.canvas.parentElement.removeChild(ctx.canvas);\n      ctx.canvas.remove();\n    }\n  },\n};\n\nlet actionObject = {\n  // undo/redo methods\n  ctrl: {\n    z: function () {\n      //Undo action\n\n      if (actions.undoList.length != 0) {\n        // get last action\n        let lastAction = actions.undoList.pop();\n\n        // undo the last action, save the unundo\n        let unundo = lastAction();\n\n        //push the unundo onto unundo list\n        actions.unundoList.push(unundo);\n      }\n    },\n    y: function () {\n      //un-undo action.\n\n      if (actions.unundoList.length != 0) {\n        //get last action\n        let lastAction = actions.unundoList.pop();\n\n        // undo the last action, save the undo\n        let undo = lastAction();\n\n        //push the undo onto the list\n        actions.undoList.push(undo);\n      }\n    },\n  },\n  noctrl: {},\n};\n\nvar actions = {\n  // holds a history of the objects added to fractal.\n  undoList: [],\n  unundoList: [],\n};\n\n/* \nClass definitions\n*/\ncolorMap = {\n  black: new Color(0, 0, 0),\n  grey: new Color(128, 128, 128),\n  darkred: new Color(\"8B\", \"00\", \"00\", (hex = true)),\n  red: new Color(\"FF\", \"00\", \"00\", (hex = true)),\n  orange: new Color(\"FF\", \"45\", \"00\", (hex = true)),\n  yellow: new Color(\"FF\", \"FF\", \"00\", (hex = true)),\n  lawngreen: new Color(\"7C\", \"FC\", \"00\", (hex = true)),\n  green: new Color(\"00\", \"80\", \"00\", (hex = true)),\n  cadetblue: new Color(\"5F\", \"9E\", \"A0\", (hex = true)),\n  blue: new Color(\"00\", \"00\", \"FF\", (hex = true)),\n  violet: new Color(\"EE\", \"82\", \"EE\", (hex = true)),\n  purple: new Color(\"80\", \"00\", \"80\", (hex = true)),\n  cyan: new Color(\"00\", \"FF\", \"FF\", (hex = true)),\n  lightsalmon: new Color(\"FF\", \"A0\", \"7A\", (hex = true)),\n  lightyellow: new Color(\"FF\", \"FF\", \"E0\", (hex = true)),\n  lime: new Color(\"00\", \"FF\", \"00\", (hex = true)),\n  mistyrose: new Color(\"FF\", \"E4\", \"E1\", (hex = true)),\n  slateblue: new Color(\"6A\", \"5A\", \"CD\", (hex = true)),\n  tomato: new Color(\"FF\", \"63\", \"47\", (hex = true)),\n  white: new Color(\"FF\", \"FF\", \"FF\", (hex = true)),\n};\n\nblack = colorMap.black;\nwhite = colorMap.white;\n\nfunction Color(r, g, b, hex = false) {\n  if (hex) {\n    this.r = hexToDecimal(r);\n    this.g = hexToDecimal(g);\n    this.b = hexToDecimal(b);\n  } else {\n    this.r = r;\n    this.b = b;\n    this.g = g;\n  }\n}\nColor.prototype.toString = function (hex = false) {\n  if (hex) {\n    return `#${zeroFill(decimalToHex(this.r), 2)}${zeroFill(\n      decimalToHex(this.g),\n      2\n    )}${zeroFill(decimalToHex(this.b), 2)}`;\n  } else {\n    return `rgb(${this.r},${this.g},${this.b})`;\n  }\n};\nfunction Branch(transformation) {\n  this.transformation = transformation;\n}\n\nfunction Point(x, y) {\n  this.x = x;\n  this.y = y;\n}\n\nfunction Shape(\n  points = [],\n  size = undefined,\n  color = black,\n  thickness = 1,\n  style = \"stroke\",\n  fade  = 0\n) {\n  this.points = points;\n  this.color = color;\n  this.thickness = thickness;\n  this.style = style;\n  this.fade = fade;\n  if (size === undefined) {\n    this.size = radius(points);\n  } else {\n    this.size = size;\n  }\n\n  this.build = function (ctx) {\n    let last = this.points.length - 1;\n    ctx.moveTo(this.points[last].x, this.points[last].y);\n    this.points.forEach((el) => ctx.lineTo(el.x, el.y));\n  };\n\n  this.draw = function (ctx) {\n    // Check to see if the shape is in frame, and if it isn't, don't draw\n    let x = this.points[0].x;\n    let y = this.points[0].y;\n\n    if (\n      x + this.size <= boundaries.left ||\n      x - this.size >= boundaries.right ||\n      y + this.size <= boundaries.bottom ||\n      y - this.size >= boundaries.top\n    ) {\n      return;\n    } else {\n      if (this.style === \"stroke\" || this.points.length === 2) {\n        ctx.lineWidth = this.thickness;\n        ctx.strokeStyle = this.color;\n        ctx.beginPath();\n        this.build(ctx);\n        ctx.stroke();\n      } else if (this.style === \"fill\") {\n        ctx.fillStyle = this.color;\n        ctx.beginPath();\n        this.build(ctx);\n        ctx.fill();\n      } else {\n      }\n    }\n  };\n}\nfunction Line(transformation, color = black, thickness = 1, style = \"stroke\", fade = 0) {\n  this.template = [new Point(0, 0), new Point(0, 1)];\n  Shape.call(\n    this,\n    map(this.template, (el) => transformation.apply(el)),\n    transformation.size,\n    color,\n    thickness,\n    style,\n    fade\n  );\n\n  this.build = function (ctx) {\n    // unique draw function for performance reasons.\n    ctx.moveTo(this.points[0].x, this.points[0].y);\n    ctx.lineTo(this.points[1].x, this.points[1].y);\n  };\n}\nfunction Triangle(\n  transformation,\n  color = black,\n  thickness = 1,\n  style = \"stroke\",\n  fade = 0\n) {\n  this.template = [new Point(-0.5, 0), new Point(0.5, 0), new Point(0, 1)];\n  Shape.call(\n    this,\n    map(this.template, (el) => transformation.apply(el)),\n    transformation.size,\n    color,\n    thickness,\n    style,\n    fade\n  );\n}\nfunction Curve(\n  transformation,\n  color = black,\n  thickness = 1,\n  style = \"stroke\",\n  fade = 0\n) {}\nfunction Oval(transformation, color = black, thickness = 1, style = \"stroke\", fade = 0) {}\nfunction Circle(\n  transformation,\n  color = black,\n  thickness = 1,\n  style = \"stroke\",\n  fade = 0\n) {\n  this.template = [new Point(0, 0.5)];\n  Shape.call(\n    this,\n    map(this.template, (el) => transformation.apply(el)),\n    transformation.size,\n    color,\n    thickness,\n    style,\n    fade\n  );\n  this.build = function (ctx) {\n    //special draw function.\n    ctx.moveTo(this.points[0].x + this.size / 2, this.points[0].y);\n    ctx.arc(this.points[0].x, this.points[0].y, this.size / 2, 0, 2 * Math.PI);\n  };\n}\nfunction RightTriangle(\n  transformation,\n  color = black,\n  thickness = 1,\n  style = \"stroke\"\n) {}\nfunction Rectangle(\n  transformation,\n  color = black,\n  thickness = 1,\n  style = \"stroke\",\n  fade = 0\n) {\n  this.template = [\n    new Point(-0.5, 0),\n    new Point(0.5, 0),\n    new Point(0.5, 1),\n    new Point(-0.5, 1),\n  ];\n  Shape.call(\n    this,\n    map(this.template, (el) => transformation.apply(el)),\n    transformation.size,\n    color,\n    thickness,\n    style,\n    fade\n  );\n}\nfunction Pentagon(\n  transformation,\n  color = black,\n  thickness = 1,\n  style = \"stroke\"\n) {}\nfunction Hexagon(\n  transformation,\n  color = black,\n  thickness = 1,\n  style = \"stroke\",\n  fade = 0\n) {\n  // x = 0.2257\n  // 1-x = 0.7743\n  this.template = [\n    new Point(0, 1),\n    new Point(0.433, 0.75),\n    new Point(0.433, 0.25),\n    new Point(0, 0),\n    new Point(-0.433, 0.25),\n    new Point(-0.433, 0.75),\n  ];\n  Shape.call(\n    this,\n    map(this.template, (el) => transformation.apply(el)),\n    transformation.size,\n    color,\n    thickness,\n    style,\n    fade\n  );\n}\nfunction Septagon(\n  transformation,\n  color = black,\n  thickness = 1,\n  style = \"stroke\"\n) {}\nfunction Octagon(\n  transformation,\n  color = black,\n  thickness = 1,\n  style = \"stroke\",\n  fade = 0\n) {\n  //x = 0.292893\n  // x-0.5 = -0.2071\n  // 0.5 -x = 0.2071\n  // 1-x = 0.7071\n  this.template = [\n    new Point(-0.2071, 0),\n    new Point(0.2071, 0),\n    new Point(0.5, 0.292893),\n    new Point(0.5, 0.7071),\n    new Point(0.2071, 1),\n    new Point(-0.2071, 1),\n    new Point(-0.5, 0.7071),\n    new Point(-0.5, 0.292893),\n  ];\n  Shape.call(\n    this,\n    map(this.template, (el) => transformation.apply(el)),\n    transformation.size,\n    color,\n    thickness,\n    style,\n    fade\n  );\n}\nfunction RoundedRectangle(\n  transformation,\n  color = black,\n  thickness = 1,\n  style = \"stroke\"\n) {}\nfunction Polygon(\n  transformation,\n  color = black,\n  thickness = 1,\n  style = \"stroke\"\n) {}\nfunction RightArrow(\n  transformation,\n  color = black,\n  thickness = 1,\n  style = \"stroke\"\n) {}\nfunction LeftArrow(\n  transformation,\n  color = black,\n  thickness = 1,\n  style = \"stroke\"\n) {}\nfunction UpArrow(\n  transformation,\n  color = black,\n  thickness = 1,\n  style = \"stroke\"\n) {}\nfunction DownArrow(\n  transformation,\n  color = black,\n  thickness = 1,\n  style = \"stroke\"\n) {}\nfunction FourStar(\n  transformation,\n  color = black,\n  thickness = 1,\n  style = \"stroke\",\n  fade = 0\n) {\n  this.template = [\n    new Point(0, 0),\n    new Point(0.125, 0.375),\n    new Point(0.5, 0.5),\n    new Point(0.125, 0.625),\n    new Point(0, 1),\n    new Point(-0.125, 0.625),\n    new Point(-0.5, 0.5),\n    new Point(-0.125, 0.375),\n  ];\n  Shape.call(\n    this,\n    map(this.template, (el) => transformation.apply(el)),\n    transformation.size,\n    color,\n    thickness,\n    style,\n    fade\n  );\n}\nfunction FiveStar(\n  transformation,\n  color = black,\n  thickness = 1,\n  style = \"stroke\",\n  fade = 0\n) {\n  this.template = [\n    new Point(-0.306, 0),\n    new Point(0.002, 0.218),\n    new Point(0.312, 0),\n    new Point(0.204, 0.378),\n    new Point(0.5, 0.608),\n    new Point(0.122, 0.618),\n    new Point(0, 1),\n    new Point(-0.12, 0.627),\n    new Point(-0.5, 0.604),\n    new Point(-0.198, 0.378),\n  ];\n  Shape.call(\n    this,\n    map(this.template, (el) => transformation.apply(el)),\n    transformation.size,\n    color,\n    thickness,\n    style,\n    fade\n  );\n}\nfunction SixPointStar(\n  transformation,\n  color = black,\n  thickness = 1,\n  style = \"stroke\"\n) {}\n\nfunction Transformation(a, b, c, d, e, f, color = black, fade = 0) {\n  // matrix notation for a linear transformation\n  // if a vector is expressed as (x,y,1), the Transformation is equivalent to the matrix:\n  // ( a c e )\n  // ( b d f )\n\n  // interpretation:\n  // a = horizontal scaling\n  // b = vertical skewing\n  // c = horizontal skewing\n  // d = vertical scaling\n  // e = horizontal translation\n  // f = vertical translation\n\n  this.a = a;\n  this.b = b;\n  this.c = c;\n  this.d = d;\n  this.e = e;\n  this.f = f;\n\n  this.xscale = (a ** 2 + b ** 2) ** 0.5;\n  this.yscale = (c ** 2 + d ** 2) ** 0.5;\n\n  this.size = Math.max(this.xscale, this.yscale);\n\n  //color attributes\n  this.r = color.r;\n  this.g = color.g;\n  this.bl = color.b;\n  this.fade = fade;\n}\nTransformation.prototype.apply = function (operand) {\n  // Transformation application function. Accepts points, shapes, and other transformations.\n  // Input MUST be point, shape, or transformation.\n\n  clrScale = (operand.fade * this.fade) ** 2;\n\n  if (operand instanceof Point) {\n    let x = operand.x;\n    let y = operand.y;\n\n    return new Point(\n      this.a * x + this.c * y + this.e,\n      this.d * y + this.b * x + this.f\n    );\n  } else if (operand instanceof Transformation) {\n    var a0 = operand.a;\n    var b0 = operand.b;\n    var c0 = operand.c;\n    var d0 = operand.d;\n    var e0 = operand.e;\n    var f0 = operand.f;\n\n    var a = this.a * a0 + this.c * b0;\n    var b = this.b * a0 + this.d * b0;\n    var c = this.a * c0 + this.c * d0;\n    var d = this.b * c0 + this.d * d0;\n    var e = this.a * e0 + this.c * f0 + this.e;\n    var f = this.b * e0 + this.d * f0 + this.f;\n\n    var clr = new Color(this.r, this.b, this.g);\n\n    return new Transformation(a, b, c, d, e, f, clr, this.fade);\n  } else if (operand instanceof Circle) {\n    let r = operand.color.r + (this.r - operand.color.r) * clrScale;\n    let g = operand.color.g + (this.g - operand.color.g) * clrScale;\n    let b = operand.color.b + (this.bl - operand.color.b) * clrScale;\n\n    let newPts = map(operand.points, (el) => this.apply(el));\n    let newSize = operand.size * this.size;\n    let newClr = new Color(r, g, b);\n\n    let c = new Circle(id, newClr, operand.thickness, operand.style, operand.fade);\n    c.points = newPts;\n    c.size = newSize;\n\n    return c;\n  } else {\n    let r = operand.color.r + (this.r - operand.color.r) * clrScale;\n    let g = operand.color.g + (this.g - operand.color.g) * clrScale;\n    let b = operand.color.b + (this.bl - operand.color.b) * clrScale;\n\n    let newPts = map(operand.points, (el) => this.apply(el));\n    let newSize = operand.size * this.size;\n    let newClr = new Color(r, g, b);\n\n    return new Shape(newPts, newSize, newClr, operand.thickness, operand.style, operand.fade);\n  }\n};\n\nTransformation.generateTransformation1 = function (\n  start,\n  end,\n  unit = 1,\n  color = black,\n  fade = 0\n) {\n  //relative rotation\n  var vec = {\n    x: end.x - start.x,\n    y: end.y - start.y,\n  };\n  var h = (vec.x ** 2 + vec.y ** 2) ** 0.5; //hypotenuse\n\n  var theta_1 = Math.atan2(start.y, start.x);\n  var theta_2 = Math.atan2(vec.y, vec.x);\n\n  var dt = theta_2 - theta_1;\n  let adj = cos(dt);\n  let opp = sin(dt);\n\n  let scale = Math.min(h / unit, meta.maxScale);\n\n  var a = scale * adj;\n  var b = scale * opp;\n  var c = -scale * opp;\n  var d = scale * adj;\n  var e = start.x;\n  var f = start.y;\n\n  return new Transformation(a, b, c, d, e, f, color, fade);\n};\n\nTransformation.generateTransformation2 = function (\n  angle,\n  size,\n  dx,\n  dy,\n  unit = 1,\n  color = black,\n  fade = 0\n) {\n  // simple method to generate a transformation.\n  let opp = sin(angle) * size;\n  let adj = cos(angle) * size;\n\n  return new Transformation(adj, opp, -opp, adj, dx, dy, color, fade);\n};\n\nTransformation.generateTransformation3 = function (\n  start,\n  end,\n  unit = 1,\n  color = black,\n  fade = 0\n) {\n  //absolute rotation.\n  let dx = end.x - start.x;\n  let dy = end.y - start.y;\n\n  let angle = Math.atan2(dy, dx) - Math.PI / 2;\n  let h = Math.min((dx ** 2 + dy ** 2) ** 0.5, meta.maxSize);\n\n  var a = h * cos(angle);\n  var b = h * sin(angle);\n  var c = -h * sin(angle);\n  var d = h * cos(angle);\n  var e = start.x;\n  var f = start.y;\n\n  return new Transformation(a, b, c, d, e, f, color, fade);\n};\n\n// a few transformations that are useful\nlet id = new Transformation(1, 0, 0, 1, 0, 0);\n// ++++++++++++++++++++++++++++++ Auxilliary helper functions ++++++++++++++++++++++++++++++++++++++++++++++\nfunction clear(ctx) {\n  // clears the given context\n  let c = ctx.canvas;\n  let width = c.width;\n  let height = c.height;\n  // NOTE in general, I would need to find the inverse of this transformation,\n  // Apply it to (0,0, width, height)\n  // then call clearRect on that transformed value.\n  // but since I know what kind of transformation storedTransform is, I can shortcut it, without having to calculate the inverse.\n  ctx.clearRect(-width / 2, -height / 2, width, height);\n}\n\nfunction createCanvas() {\n  // creates a new canvas. Returns a reference to that canvas's context.\n  let canvas = document.createElement(\"canvas\");\n  canvas.width = window.innerWidth;\n  canvas.height = window.innerHeight - 36;\n  document.querySelector(\"#canvasHolder\").appendChild(canvas);\n\n  let ctx = canvas.getContext(\"2d\");\n\n  return ctx;\n}\nfunction zeroFill(number, width) {\n  let s = number.toString();\n\n  while (s.length < width) {\n    s = \"0\" + s;\n  }\n  return s;\n}\nfunction filter(arr, fn) {\n  var result = [];\n  for (var i = 0; i < arr.length; i++) {\n    if (fn(arr[i])) {\n      result.push(arr[i]);\n    }\n  }\n  return result;\n}\n\nfunction map(arr, fn) {\n  var result = [];\n  for (var i = 0; i < arr.length; i++) {\n    result[i] = fn(arr[i]);\n  }\n  return result;\n}\n\nfunction radius(arr) {\n  m = 0;\n  let distance = (p1, p2) =>\n    Math.max(Math.abs(p1.x - p2.x), Math.abs(p1.y - p2.y));\n\n  for (var i = 0; i < arr.length; i++) {\n    for (var j = i; j < arr.length; j++) {\n      m = Math.max(m, distance(arr[i], arr[j]));\n    }\n  }\n  return m;\n}\n\nfunction ceiling(n) {\n  return -Math.floor(-n);\n}\n\nfunction cache(f) {\n  var dict = {};\n  function helper() {\n    let s = JSON.stringify(arguments);\n    if (dict[s] === undefined) {\n      let r = f.apply(null, arguments);\n      dict[s] = r;\n      return r;\n    } else {\n      return dict[s];\n    }\n  }\n  return helper;\n}\n\nfunction hexToDecimal(n) {\n  // takes a hex string and returns a decimal number;\n  let map = {\n    0: 0,\n    1: 1,\n    2: 2,\n    3: 3,\n    4: 4,\n    5: 5,\n    6: 6,\n    7: 7,\n    8: 8,\n    9: 9,\n    A: 10,\n    B: 11,\n    C: 12,\n    D: 13,\n    E: 14,\n    F: 15,\n    a: 10,\n    b: 11,\n    c: 12,\n    d: 13,\n    e: 14,\n    f: 15,\n  };\n  let result = 0;\n  let power = 0;\n  while (n.length !== 0) {\n    result += 16 ** power * map[n[n.length - 1]];\n    power += 1;\n    n = n.slice(0, n.length - 1);\n  }\n  return result;\n}\n\nfunction decimalToHex(n) {\n  let map = {\n    0: \"0\",\n    1: \"1\",\n    2: \"2\",\n    3: \"3\",\n    4: \"4\",\n    5: \"5\",\n    6: \"6\",\n    7: \"7\",\n    8: \"8\",\n    9: \"9\",\n    10: \"A\",\n    11: \"B\",\n    12: \"C\",\n    13: \"D\",\n    14: \"E\",\n    15: \"F\",\n  };\n\n  let result = \"\";\n  while (n !== 0) {\n    result = map[n % 16] + result;\n    n = Math.floor(n / 16);\n  }\n  return result;\n}\nfunction max(arr, f = (x) => x) {\n  if (arr.length == 0) {\n    return [0, -1];\n  }\n\n  let m = f(arr[0]);\n  let idx = 0;\n  for (let i = 1; i < arr.length; i++) {\n    if (f(arr[i]) > m) {\n      m = f(arr[i]);\n      idx = i;\n    }\n  }\n  return [m, idx];\n}\nfunction average(arr, f = (x) => x) {\n  if (arr.length == 0) {\n    return 0;\n  }\n\n  let cum = 0;\n  for (let i = 0; i < arr.length; i++) {\n    cum += f(arr[i]);\n  }\n\n  return cum / arr.length;\n}\n\n// node counting\nfunction knapsack(A, r) {\n  var sum = 1;\n  if (r <= 0) {\n    return 0;\n  }\n  for (var i = 0; i < A.length; i++) {\n    sum += knapsack(A, r - A[i]);\n  }\n\n  return sum;\n}\nknapsack = cache(knapsack);\n\nfunction countNodes(branches, objects, renderThreshold) {\n  // returns the number of nodes in a tree comprised of branches of radius radii, of max root size maxSize, and of render size limit renderThreshold.\n  // assumptions:\n  //\t 0 < radii[i] <= 0.9 all i\n  //   renderThreshold > 0;\n\n  //base case\n  if (branches.length === 0) {\n    if (maxSize === 0) {\n      return 0;\n    } else {\n      return 1;\n    }\n  }\n\n  // for counting depth, the most relevant is the max sized object.\n  maxSize = max(objects, (x) => x.size);\n\n  // Calculating\n  let ratio = renderThreshold / maxSize;\n  let depths = [];\n  let maxDepth = 0;\n  for (var i = 0; i < branches.length; i++) {\n    let d = Math.min(\n      100,\n      Math.round(Math.log(ratio) / Math.log(branches[i].transformation.size))\n    );\n    depths.push(d);\n    maxDepth = Math.max(maxDepth, d);\n  }\n\n  for (var i = 0; i < branches.length; i++) {\n    depths[i] = Math.floor(maxDepth / depths[i]);\n  }\n\n  let nodes = knapsack(depths, maxDepth);\n\n  return nodes;\n}\n\nfunction calculateDrawTime() {\n  // *ROUGH* calculation on how long it'll take to draw the fractal.\n\n  // time = time per frame * number of frames\n  //      = (1/fps) * (number of operations / 5000)\n  let time =\n    (1 / 60) *\n    (fractal.objects.length *\n      countNodes(fractal.branches, fractal.objects, meta.renderThreshold));\n\n  //output\n  return time;\n}\n\nfunction save() {\n  // 'to blob' paramater function. Specified what's to be done with the blob once it is created.\n  function saveContext(blob) {\n    // create a url of the blob\n    var blobURL = URL.createObjectURL(blob);\n    // open it in a new tab\n    window.open(blobURL);\n  }\n  // stop drawing while this takes place\n  renderInterrupt = true;\n  // create a new canvas\n  const destCtx = createCanvas();\n  // fill in the background for the new canvas\n  destCtx.fillStyle = meta.backgroundColor.toString();\n  destCtx.fillRect(0, 0, width, height);\n  // copy all other canvases onto this new canvas\n  for (let i = 0; i < fractal.objects.length; i++) {\n    srcImage = fractal.contexts[i].canvas;\n    destCtx.drawImage(srcImage, 0, 0);\n  }\n  // save the canvas\n  destCtx.canvas.toBlob(saveContext, (type = \"image/png\"));\n  // delete the canvas\n  destCtx.canvas.remove();\n  // start drawing again\n  renderInterrupt = false;\n  // return\n  return;\n}\n"],"names":["startRender","test","sin","Math","cos","objectRenderArray","meta","style","Line","colorStyle","thickness","drawColor","Color","backgroundColor","fillStyle","clrscale","fadeVal","renderThreshold","maxDepth","maxScale","maxSize","operationLimit","unit","metaCopy","fractal","objects","branches","contexts","drawState","opcount","i","stack","draw","length","push","node","size","pop","max","points","trans","transformation","apply","resetState","start","end","type","black","fade","Branch","forEach","ctx","clear","Transformation","generateTransformation1","createCanvas","setTransform","floor","width","height","new_obj","generateTransformation3","canvas","remove","actionObject","ctrl","z","actions","undoList","unundo","lastAction","unundoList","y","undo","noctrl","r","g","b","hex","this","hexToDecimal","Point","x","Shape","color","undefined","radius","build","last","moveTo","el","lineTo","boundaries","left","right","bottom","top","lineWidth","strokeStyle","beginPath","stroke","fill","template","call","map","Triangle","Curve","Oval","Circle","arc","PI","RightTriangle","Rectangle","Pentagon","Hexagon","Septagon","Octagon","RoundedRectangle","Polygon","RightArrow","LeftArrow","UpArrow","DownArrow","FourStar","FiveStar","SixPointStar","a","c","d","e","f","xscale","yscale","bl","colorMap","grey","darkred","red","orange","yellow","lawngreen","green","cadetblue","blue","violet","purple","cyan","lightsalmon","lightyellow","lime","mistyrose","slateblue","tomato","white","prototype","toString","zeroFill","decimalToHex","operand","clrScale","a0","b0","c0","d0","e0","f0","newPts","newSize","newClr","id","vec","h","theta_1","atan2","dt","adj","opp","scale","min","generateTransformation2","angle","dx","dy","clearRect","document","createElement","window","innerWidth","innerHeight","querySelector","appendChild","getContext","number","s","filter","arr","fn","result","m","j","p1","p2","abs","ceiling","n","cache","dict","JSON","stringify","arguments","map1","A","B","C","D","E","F","power","slice","map2","idx","average","cum","knapsack","sum","countNodes","ratio","depths","round","log","calculateDrawTime","save","renderInterrupt","destCtx","fillRect","srcImage","drawImage","toBlob","blob","blobURL","URL","createObjectURL","open"],"version":3,"file":"index.7ec32a01.js.map"}