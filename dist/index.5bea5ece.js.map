{"mappings":"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","sources":["main.js"],"sourcesContent":["/*\n    TODO\n    - make testing suite\n        - test on Chrome/Edge/firefox/opera (safari?);\n        - test on different computers.\n            - firefox menu boxes *increase* in size, causing misplacement\n        - *new* button still doesn't work\n    -Adapt for mobile use\n    -fix formatting on different screens\n    \n    -add google adsense\n    -read up on marketing (google search)\n    -market product (reddit, facebook, twitter)\n\n    \n\n    EXPANSION\n    - grab / zoom tools.\n    - snap to angle\n\n    KNOWN BUGS\n    - lags when adding too many normal objects. Maybe try adding canvases as batches\n    - when outside elements are highlighted, user input is wonky \n        - unfixable with current knowledge (how do I know when elements are highlighted?)\n    - when a branch element is the first to be added, fade is not applied to it \n        X Couldn't replicate\n\n    ANALYSIS\n    had my mom take the program through a test drive. I got a lot of good information out of it, I'll relate the most relevant information here:\n        - For the first minute, she had no idea what to do or what the program does. [Start with fractal displayed to motivate learning?]\n        - Wanted curves in addition to straight lines\n        - gasp once branches had been used (yay!)\n        - confusion at real time draw limiting. [It might be necessary to change draw ordering? I want it to be a 'first on top' sort of thing, which it isn't for the fractals.]\n        - disatisfied with color limits [controlling fractal color approach after creation?]\n        - non replicatable [advanced menu with greater control?]\n        - thinks fill means autofill\n        - wants autofill\n        - Wants more images than what is provided (wants to put name in). \n        - More clear icons for 'save' and 'new'. \n        - save prompt box when clicking 'new' image.\n        - Wants oblong shapes\n        - started mindlessly drawing after 15 minutes (I can only grab people's attention for 15 minutes max)\n        - defaults to spirals. I should make translations / scales easier to do (snap to?);\n        \n        She seemed to think it was really cool, but it didn't really GRAB her attention.\n        It will be a good sign if she wants to look at it again without my prompting.\n\n        Proposed changes, sorted by difficulty:\n        X - done\n        O - not doing\n        L - later versions (perhaps paid version)\n        easy:\n            X cool fractal at program start (motivation)\n            L curves / oblongs\n            L tweaking color limiting\n                O 'clear' color (perserves color)\n                X colo fade slider on menu bar\n            X changing 'fill' to 'solid'\n            O labelling new / save icons\n            X alert to save when clicking 'new'\n            L snapping to specific angles.\n            - on top layer\n        hard:\n            - 'first on top' wrt new branches (urg)\n            - allowing multiple fractals\n            - allowing images / text, in addition to basic shapes / colors.\n            - advanced menu for repeatability, greater control\n        irrelevant? \n            - screen translation / zoom / rotation (non linear transformations too?)\n            - moving objects wrt time\n\n    Had josh use the program\n        -change the draw order so that new input is added immediately. He assumed there was lag, which is not what I want.\n        -He didn't immediately realize how to clear the initial fractal\n            -update 'new' button to totally undo, instead of refresh?\n            - \n*/\n\n// Container function for initializing interactive buttons in the web page.\nfunction initializeMenu() {\n  var styleMap = {\n    line: Line,\n    circle: Circle,\n    triangle: Triangle,\n    rectangle: Rectangle,\n    hexagon: Hexagon,\n    octagon: Octagon,\n    fourstar: FourStar,\n    fivestar: FiveStar,\n    branch: Branch,\n    grab: \"grab\",\n  };\n  var numberMap = {\n    one: 1,\n    two: 2,\n    three: 3,\n    four: 4,\n    five: 5,\n    six: 6,\n    seven: 7,\n    eight: 8,\n    nine: 9,\n    ten: 10,\n  };\n  var last = {\n    target: undefined,\n    class: undefined,\n  };\n  var thicknessInputMenu_isOpen = false;\n  let menu = document.querySelector(\"#menu\");\n  let thicknessInputMenu = document.querySelector(\"#thicknessInputMenu\"); //\n\n  //create event handler\n  function handler(e) {\n    // find target of hit\n    let target = e.target;\n    // if thicknessSelectBoolean is true, then the thicknessOptionPanel is open, and needs to be closed.\n    if (thicknessInputMenu_isOpen) {\n      document.querySelector(\"#thicknessInputMenu\").style.display = \"none\";\n      document\n        .querySelector(\"#thicknessDisplay\")\n        .setAttribute(\"class\", \"thicknessContainer\");\n      thicknessInputMenu_isOpen = false;\n    }\n    // control flow based on target\n    let identifier = target.getAttribute(\"class\");\n\n    if (identifier === \"menuImage\") {\n      target = target.parentNode;\n\n      // special cases:\n      if (target.id === \"undo\") {\n        actionObject.ctrl.z();\n        return;\n      } else if (target.id === \"redo\") {\n        actionObject.ctrl.y();\n        return;\n      } else if (target.id === \"center\") {\n        resetCoordinates();\n        return;\n      } else if (target.id === \"thicknessDisplay\") {\n        document\n          .querySelector(\"#thicknessDisplay\")\n          .setAttribute(\"class\", \"thicknessContainer selected\");\n\n        // display thicknessInputMenu\n        let thicknessInputMenu = document.querySelector(\"#thicknessInputMenu\");\n        thicknessInputMenu.style.display = \"block\";\n\n        //set thicknessSelectBoolean to true\n        thicknessInputMenu_isOpen = true;\n\n        return;\n      } else if (target.getAttribute(\"class\") === \"thicknessOption\") {\n        //set thickness\n        meta.thickness = numberMap[target.id];\n        return;\n      } else if (target.id === \"stroke\") {\n        meta.fillStyle = \"stroke\";\n\n        document\n          .querySelector(\"#stroke\")\n          .setAttribute(\"class\", \"menuItem selected\");\n        document.querySelector(\"#fill\").setAttribute(\"class\", \"menuItem\");\n      } else if (target.id === \"fill\") {\n        meta.fillStyle = \"fill\";\n\n        document.querySelector(\"#stroke\").setAttribute(\"class\", \"menuItem\");\n        document\n          .querySelector(\"#fill\")\n          .setAttribute(\"class\", \"menuItem selected\");\n      } else if (target.id === \"save\") {\n        save();\n      } else if (target.id === \"new\") {\n        //confirm\n        let b = confirm(\"Do you want to save changes to this image?\");\n        if (b) {\n          save();\n        }\n        setTimeout(() => window.location.replace(window.location.href), 1000);\n\n      } else {\n        // general cases:\n        meta.style = styleMap[target.id];\n\n        // add the selected target to the 'selected' class\n        let c = target.getAttribute(\"class\");\n        target.setAttribute(\"class\", c + \" selected\");\n\n        //clear the last target\n        if (last.target === undefined) {\n          last.target = target;\n          last.class = c;\n        } else {\n          last.target.setAttribute(\"class\", last.class);\n          if (last.target === target) {\n            last.target = undefined;\n            last.class = undefined;\n            meta.style = Line;\n          } else {\n            last.target = target;\n            last.class = c;\n          }\n        }\n      }\n    } else if (identifier === \"colorBoxInterior\") {\n      let p = target.parentNode;\n\n      // background color:\n      if (p.id === \"backgroundColor\") {\n        // change meta.drawStyle\n        meta.colorStyle = \"backgroundColor\";\n\n        //stop highlighting drawColor box\n        document\n          .querySelector(\"#drawColorContainer\")\n          .setAttribute(\"class\", \"colorStyle\");\n\n        //start highlighting backgroundColor\n        document\n          .querySelector(\"#backgroundColorContainer\")\n          .setAttribute(\"class\", \"colorStyle selected\");\n      } else if (p.id === \"drawColor\") {\n        //change meta.drawStyle\n        meta.colorStyle = \"drawColor\";\n\n        //stop highlighting backgroundColor box;\n        document\n          .querySelector(\"#backgroundColorContainer\")\n          .setAttribute(\"class\", \"colorStyle\");\n\n        //start highlighting drawColor box\n        document\n          .querySelector(\"#drawColorContainer\")\n          .setAttribute(\"class\", \"colorStyle selected\");\n      } else {\n        let color = p.id;\n\n        // change the background of 'Chosen color'\n        document.querySelector(\n          `#${meta.colorStyle} .colorBoxInterior`\n        ).style.backgroundColor = color;\n\n        // change meta color information.\n        if (meta.colorStyle === \"backgroundColor\") {\n          meta.backgroundColor = colorMap[color];\n          // change main background color.\n          document.querySelector(\"main\").style.backgroundColor = color;\n        } else if (meta.colorStyle === \"drawColor\") {\n          meta.drawColor = colorMap[color];\n        }\n      }\n    } else {\n      return;\n    }\n  }\n\n  //attatch handler to menu.\n  menu.addEventListener(\"click\", handler);\n  thicknessInputMenu.addEventListener(\"click\", handler);\n\n  // color form handler\n  function setColor(e) {\n    let color = e.target.value;\n    if (meta.colorStyle === \"backgroundColor\") {\n      meta.backgroundColor = new Color(\n        color.slice(1, 3),\n        color.slice(3, 5),\n        color.slice(5, 7),\n        (hex = true)\n      );\n      document.querySelector(\"main\").style.backgroundColor = color;\n    } else if (meta.colorStyle === \"drawColor\") {\n      meta.drawColor = new Color(\n        color.slice(1, 3),\n        color.slice(3, 5),\n        color.slice(5, 7),\n        (hex = true)\n      );\n    }\n    document.querySelector(\n      `#${meta.colorStyle} .colorBoxInterior`\n    ).style.backgroundColor = color;\n  }\n  let customColor = document.querySelector(\"#customColor\");\n  customColor.addEventListener(\"input\", setColor);\n\n  //fade value handler\n  function setFade(e) {\n      meta.fadeVal = e.target.value / 100;\n  }\n  let fadeRange = document.querySelector('#fading');\n  fadeRange.addEventListener(\"input\", setFade);\n\n  //canvas cursor handler.\n  const canvas = document.querySelector(\"canvas\");\n  canvas.addEventListener(\"mouseenter\", function () {\n    if (meta.style === \"grab\") {\n      document.querySelector(\"main\").style.cursor = \"grabbing\";\n    } else {\n      document.querySelector(\"main\").style.cursor = \"crosshair\";\n    }\n  });\n  canvas.addEventListener(\"mouseleave\", function () {\n    document.querySelector(\"main\").style.cursor = \"auto\";\n  });\n}\nconst canvas = document.querySelector(\"canvas\");\nconst ctx = canvas.getContext(\"2d\");\n\nif (!ctx) {\n  throw \"\";\n}\n\nvar width = (canvas.width = window.innerWidth);\nvar height = (canvas.height = window.innerHeight - 36);\n\nctx.setTransform(1, 0, 0, -1, Math.floor(width / 2), Math.floor(height / 2));\n\nfunction resetCoordinates() {\n  // reset base canvas.\n  width = canvas.width = window.innerWidth;\n  height = canvas.height = window.innerHeight - 36;\n  ctx.setTransform(1, 0, 0, -1, width / 2, height / 2);\n\n  boundaries.updateBoundaries();\n\n  //resize and clear all canvases.\n  for (let i = 0; i < fractal.contexts.length; i++) {\n    c = fractal.contexts[i];\n    can = c.canvas;\n    //set width,height\n    can.width = width;\n    can.height = height;\n    //set transform\n    c.setTransform(1, 0, 0, -1, width / 2, height / 2);\n    //clear\n    clear(c);\n  }\n\n  //reset fractal\n  fractal.resetState();\n}\n// updates dimensions of canvas on window resize.\nwindow.addEventListener(\"resize\", resetCoordinates);\n\n// Real-time state variables\nlet x = 0;\nlet y = 0;\nlet mousedown = false;\nlet mouse = {\n  x: 0,\n  y: 0,\n};\nlet renderInterrupt = false;\n\nlet boundaries = {\n  //used when determining if a drawn object is out of frame\n  top: height / 2,\n  right: width / 2,\n  bottom: -height / 2,\n  left: -width / 2,\n  updateBoundaries: function () {\n    boundaries.top = height / 2;\n    boundaries.right = width - width / 2;\n    boundaries.bottom = -(height - height / 2);\n    boundaries.left = -width / 2;\n  },\n};\n\nfunction pushFractal(start, end, style, drawColor, thickness, fillStyle, fadeVal) {\n  // convenience function. Basically the same as fractal.push, but also populates the actions.undoList\n\n  //push object onto fractal\n  fractal.push(start, end, style, drawColor, thickness, fillStyle, fadeVal);\n\n  // update action list.\n  function undo() {\n    fractal.pop(style);\n    function unundo() {\n      fractal.push(start, end, style, drawColor, thickness, fillStyle, fadeVal);\n      return undo;\n    }\n    return unundo;\n  }\n  actions.undoList.push(undo);\n\n  // reset unundo list, since a new object has been added.\n  actions.unundoList = [];\n}\nfunction mouseupHandler(e) {\n  if (mousedown === false) {\n    return;\n  }\n  // remove the 'moving' object from the fractal\n  fractal.pop(meta.style);\n\n  // create local copies of relevant variables (undo/redo actions rely on a functional programming paradigm, so I need copies saved to local function state.)\n  let start = new Point(x, y);\n  let end = new Point(mouse.x, mouse.y);\n\n  // add to the fractal\n  pushFractal(\n    start,\n    end,\n    meta.style,\n    meta.drawColor,\n    meta.thickness,\n    meta.fillStyle,\n    meta.fadeVal\n  );\n\n  // update state\n  mousedown = false;\n}\nfunction mousedownHandler(e) {\n  if (e.button === 0) {\n    // update program state\n    recentlySaved = false;\n    let start = windowToCanvas(e);\n    x = start.x;\n    y = start.y;\n\n    mousedown = true;\n\n    // add to fractal.\n    fractal.push(start, start, meta.style, meta.drawColor, meta.thickness, meta.fillStyle, meta.fadeVal);\n  }\n}\n\nfunction updateMouseCoords(e) {\n  let pt = windowToCanvas(e);\n  mouse.x = pt.x;\n  mouse.y = pt.y;\n}\n\ncanvas.addEventListener(\"mousedown\", mousedownHandler);\nwindow.addEventListener(\"mouseup\", mouseupHandler);\n//window.addEventListener('mousemove', mousemoveHandler);\nwindow.addEventListener(\"mousemove\", updateMouseCoords);\n\n// Coordinate transformation from current window to wider system\nfunction windowToCanvas(e) {\n  // inverse of canvas to window.\n  return new Point(\n    e.clientX - Math.floor(width / 2),\n    -(e.clientY - Math.floor(height / 2))\n  );\n}\n\n// keyboard handlers\nfunction keydownHandler(e) {\n  if (e.ctrlKey) {\n    if (actionObject.ctrl[e.key] !== undefined) {\n      actionObject.ctrl[e.key]();\n    }\n  } else {\n    if (actionObject.noctrl[e.key] !== undefined) {\n      actionObject.noctrl[e.key]();\n    }\n  }\n}\nwindow.addEventListener(\"keydown\", keydownHandler);\n\n//Draw a nice initial fractal.\n\npushFractal(\n    new Point(0,0),\n    new Point(0,100),\n    Line,\n    meta.drawColor,\n    2,\n    meta.fillStyle,\n    meta.fadeVal\n)\nmeta.style = Branch\nmeta.drawColor = colorMap.green;\n\n//Object renderer\nobjectRenderArray.push(fractal);\nobjectRenderArray.push(\n  new Circle(new Transformation(10, 0, 0, 10, 0, -5), \"rgb(255,127,39)\")\n);\n\nfunction render(timestamp) {\n  if (!renderInterrupt) {\n    //update state variables\n    if (mousedown) {\n      // remove the last fractal element\n      fractal.pop(meta.style);\n\n      // add a new element\n      let start = new Point(x, y);\n      let end = new Point(mouse.x, mouse.y);\n      fractal.push(\n        start,\n        end,\n        meta.style,\n        meta.drawColor,\n        meta.thickness,\n        meta.fillStyle,\n        meta.fadeVal\n      );\n    }\n\n    //clear\n    clear(ctx);\n\n    //draw\n    objectRenderArray.forEach((obj) => obj.draw(ctx));\n  }\n  //loop\n  window.requestAnimationFrame(render);\n}\n\n// Final initialization.\ninitializeMenu();\n\nif (startRender) {\n  render();\n}\nif (test) {\n  console.log(`Total time: ${fractalDrawBenchmark()}`);\n}\n"],"names":["initializeMenu","styleMap","line","Line","circle","Circle","triangle","Triangle","rectangle","Rectangle","hexagon","Hexagon","octagon","Octagon","fourstar","FourStar","fivestar","FiveStar","branch","Branch","grab","numberMap","one","two","three","four","five","six","seven","eight","nine","ten","last","target","undefined","class","thicknessInputMenu_isOpen","menu","document","querySelector","thicknessInputMenu1","handler","e","style","display","setAttribute","identifier","getAttribute","parentNode","id","actionObject","ctrl","z","y","resetCoordinates","meta","thickness","fillStyle","save","confirm","setTimeout","window","location","replace","href","c","p","colorStyle","color","backgroundColor","colorMap","drawColor","addEventListener","value","Color","slice","hex","fadeVal","canvas1","cursor","canvas","ctx","getContext","width","innerWidth","height","innerHeight","setTransform","boundaries","updateBoundaries","i","fractal","contexts","length","can","clear","resetState","Math","floor","x","mousedown","mouse","renderInterrupt","top","right","bottom","left","pushFractal","start","end","push","actions","undoList","undo","pop","unundoList","mouseupHandler","Point","mousedownHandler","button","recentlySaved","windowToCanvas","updateMouseCoords","pt","clientX","clientY","keydownHandler","ctrlKey","key","noctrl","render","timestamp","objectRenderArray","forEach","obj","draw","requestAnimationFrame","green","Transformation","startRender","test","console","log","fractalDrawBenchmark"],"version":3,"file":"index.5bea5ece.js.map"}