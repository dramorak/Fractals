{"mappings":"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","sources":["main.js"],"sourcesContent":["/*\n    TODO\n    - make testing suite\n        - test on Chrome/Edge/firefox/opera (safari?);\n        - test on different computers.\n            - firefox menu boxes *increase* in size, causing misplacement\n        - *new* button still doesn't work\n    -test on mobile devices\n        -scrolling issues\n        -highlighting issues\n    -SEO\n    -include structured data\n    -do sitemap \n    -add google adsense\n    -read up on marketing (google search)\n    -market product (reddit, facebook, twitter)\n    -custom color doesn't work on mobile\n    \n    EXPANSION\n    - grab / zoom tools.\n    - snap to angle\n    - tool for more general transformation (particularly reflections, (non linear?))\n    KNOWN BUGS  \n    - lags when adding too many normal objects. Maybe try adding canvases as batches\n    - when outside elements are highlighted, user input is wonky \n        - unfixable with current knowledge (how do I know when elements are highlighted?)\n    - when a branch element is the first to be added, fade is not applied to it \n        X Couldn't replicate\n\n    ANALYSIS\n    had my mom take the program through a test drive. I got a lot of good information out of it, I'll relate the most relevant information here:\n        - For the first minute, she had no idea what to do or what the program does. [Start with fractal displayed to motivate learning?]\n        - Wanted curves in addition to straight lines\n        - gasp once branches had been used (yay!)\n        - confusion at real time draw limiting. [It might be necessary to change draw ordering? I want it to be a 'first on top' sort of thing, which it isn't for the fractals.]\n        - disatisfied with color limits [controlling fractal color approach after creation?]\n        - non replicatable [advanced menu with greater control?]\n        - thinks fill means autofill\n        - wants autofill\n        - Wants more images than what is provided (wants to put name in). \n        - More clear icons for 'save' and 'new'. \n        - save prompt box when clicking 'new' image.\n        - Wants oblong shapes\n        - started mindlessly drawing after 15 minutes (I can only grab people's attention for 15 minutes max)\n        - defaults to spirals. I should make translations / scales easier to do (snap to?);\n        \n        She seemed to think it was really cool, but it didn't really GRAB her attention.\n        It will be a good sign if she wants to look at it again without my prompting.\n\n        Proposed changes, sorted by difficulty:\n        X - done\n        O - not doing\n        L - later versions (perhaps paid version)\n        easy:\n            X cool fractal at program start (motivation)\n            L curves / oblongs\n            L tweaking color limiting\n                O 'clear' color (perserves color)\n                X colo fade slider on menu bar\n            X changing 'fill' to 'solid'\n            O labelling new / save icons\n            X alert to save when clicking 'new'\n            L snapping to specific angles.\n            - on top layer\n        hard:\n            - 'first on top' wrt new branches (urg)\n            - allowing multiple fractals\n            - allowing images / text, in addition to basic shapes / colors.\n            - advanced menu for repeatability, greater control\n        irrelevant? \n            - screen translation / zoom / rotation (non linear transformations too?)\n            - moving objects wrt time\n\n    Had josh use the program\n        -change the draw order so that new input is added immediately. He assumed there was lag, which is not what I want.\n        -He didn't immediately realize how to clear the initial fractal\n            -update 'new' button to totally undo, instead of refresh?\n            - \n*/\nlet isMobile = window.matchMedia(\"only screen and (max-width: 1000px)\").matches;\n// Container function for initializing interactive buttons in the web page.\nfunction initializeMenu() {\n  var styleMap = {\n    line: Line,\n    circle: Circle,\n    triangle: Triangle,\n    rectangle: Rectangle,\n    hexagon: Hexagon,\n    octagon: Octagon,\n    fourstar: FourStar,\n    fivestar: FiveStar,\n    branch: Branch,\n    grab: \"grab\",\n  };\n  var numberMap = {\n    one: 1,\n    two: 2,\n    three: 3,\n    four: 4,\n    five: 5,\n    six: 6,\n    seven: 7,\n    eight: 8,\n    nine: 9,\n    ten: 10,\n  };\n  var last = {\n    target: document.querySelector('#branch'),\n    class: \"branchContainer\",\n  };\n  var thicknessInputMenu_isOpen = false;\n  let menu = document.querySelector(\"#menu\");\n  let thicknessInputMenu = document.querySelector(\"#thicknessInputMenu\"); //\n\n  //create event handler\n  function handler(e) {\n    // find target of hit\n    let target = e.target;\n    // if thicknessSelectBoolean is true, then the thicknessOptionPanel is open, and needs to be closed.\n    if (thicknessInputMenu_isOpen) {\n      document.querySelector(\"#thicknessInputMenu\").style.display = \"none\";\n      document\n        .querySelector(\"#thicknessDisplay\")\n        .setAttribute(\"class\", \"thicknessContainer\");\n      thicknessInputMenu_isOpen = false;\n    }\n    // control flow based on target\n    let identifier = target.getAttribute(\"class\");\n\n    if (identifier === \"menuImage\") {\n      target = target.parentNode;\n\n      // special cases:\n      if (target.id === \"undo\") {\n        actionObject.ctrl.z();\n        return;\n      } else if (target.id === \"redo\") {\n        actionObject.ctrl.y();\n        return;\n      } else if (target.id === \"center\") {\n        resetCoordinates();\n        return;\n      } else if (target.id === \"thicknessDisplay\") {\n        document\n          .querySelector(\"#thicknessDisplay\")\n          .setAttribute(\"class\", \"thicknessContainer selected\");\n\n        // display thicknessInputMenu\n        let thicknessInputMenu = document.querySelector(\"#thicknessInputMenu\");\n        thicknessInputMenu.style.display = \"block\";\n\n        //set thicknessSelectBoolean to true\n        thicknessInputMenu_isOpen = true;\n\n        return;\n      } else if (target.getAttribute(\"class\") === \"thicknessOption\") {\n        //set thickness\n        meta.thickness = numberMap[target.id];\n        return;\n      } else if (target.id === \"stroke\") {\n        meta.fillStyle = \"stroke\";\n\n        document\n          .querySelector(\"#stroke\")\n          .setAttribute(\"class\", \"menuItem selected\");\n        document.querySelector(\"#fill\").setAttribute(\"class\", \"menuItem\");\n      } else if (target.id === \"fill\") {\n        meta.fillStyle = \"fill\";\n\n        document.querySelector(\"#stroke\").setAttribute(\"class\", \"menuItem\");\n        document\n          .querySelector(\"#fill\")\n          .setAttribute(\"class\", \"menuItem selected\");\n      } else if (target.id === \"save\") {\n        save();\n      } else if (target.id === \"new\") {\n        //confirm\n        let b = confirm(\"Do you want to save changes to this image?\");\n        if (b) {\n          save();\n        }\n        setTimeout(() => window.location.replace(window.location.href), 1000);\n\n      } else {\n        // general cases:\n        meta.style = styleMap[target.id];\n\n        // add the selected target to the 'selected' class\n        let c = target.getAttribute(\"class\");\n        target.setAttribute(\"class\", c + \" selected\");\n\n        //clear the last target\n        if (last.target === undefined) {\n          last.target = target;\n          last.class = c;\n        } else {\n          last.target.setAttribute(\"class\", last.class);\n          if (last.target === target) {\n            last.target = undefined;\n            last.class = undefined;\n            meta.style = Line;\n          } else {\n            last.target = target;\n            last.class = c;\n          }\n        }\n      }\n    } else if (identifier === \"colorBoxInterior\") {\n      let p = target.parentNode;\n\n      // background color:\n      if (p.id === \"backgroundColor\") {\n        // change meta.drawStyle\n        meta.colorStyle = \"backgroundColor\";\n\n        //stop highlighting drawColor box\n        document\n          .querySelector(\"#drawColorContainer\")\n          .setAttribute(\"class\", \"colorStyle\");\n\n        //start highlighting backgroundColor\n        document\n          .querySelector(\"#backgroundColorContainer\")\n          .setAttribute(\"class\", \"colorStyle selected\");\n      } else if (p.id === \"drawColor\") {\n        //change meta.drawStyle\n        meta.colorStyle = \"drawColor\";\n\n        //stop highlighting backgroundColor box;\n        document\n          .querySelector(\"#backgroundColorContainer\")\n          .setAttribute(\"class\", \"colorStyle\");\n\n        //start highlighting drawColor box\n        document\n          .querySelector(\"#drawColorContainer\")\n          .setAttribute(\"class\", \"colorStyle selected\");\n      } else {\n        let color = p.id;\n\n        // change the background of 'Chosen color'\n        document.querySelector(\n          `#${meta.colorStyle} .colorBoxInterior`\n        ).style.backgroundColor = color;\n\n        // change meta color information.\n        if (meta.colorStyle === \"backgroundColor\") {\n          meta.backgroundColor = colorMap[color];\n          // change main background color.\n          document.querySelector(\"main\").style.backgroundColor = color;\n        } else if (meta.colorStyle === \"drawColor\") {\n          meta.drawColor = colorMap[color];\n        }\n      }\n    } else {\n      return;\n    }\n  }\n\n  //attatch handler to menu.\n  menu.addEventListener(\"click\", handler);\n  thicknessInputMenu.addEventListener(\"click\", handler);\n\n  menu.addEventListener('touchstart', handler);\n  thicknessInputMenu.addEventListener('touchstart', handler);\n  \n  // color form handler\n  function setColor(e) {\n    let color = e.target.value;\n    if (meta.colorStyle === \"backgroundColor\") {\n      meta.backgroundColor = new Color(\n        color.slice(1, 3),\n        color.slice(3, 5),\n        color.slice(5, 7),\n        (hex = true)\n      );\n      document.querySelector(\"main\").style.backgroundColor = color;\n    } else if (meta.colorStyle === \"drawColor\") {\n      meta.drawColor = new Color(\n        color.slice(1, 3),\n        color.slice(3, 5),\n        color.slice(5, 7),\n        (hex = true)\n      );\n    }\n    document.querySelector(\n      `#${meta.colorStyle} .colorBoxInterior`\n    ).style.backgroundColor = color;\n  }\n  let customColor = document.querySelector(\"#customColor\");\n  customColor.addEventListener(\"input\", setColor);\n\n  //fade value handler\n  function setFade(e) {\n      meta.fadeVal = e.target.value / 100;\n  }\n  let fadeRange = document.querySelector('#fading');\n  fadeRange.addEventListener(\"input\", setFade);\n\n  //canvas cursor handler.\n  const canvas = document.querySelector(\"canvas\");\n  canvas.addEventListener(\"mouseenter\", function () {\n    if (meta.style === \"grab\") {\n      document.querySelector(\"main\").style.cursor = \"grabbing\";\n    } else {\n      document.querySelector(\"main\").style.cursor = \"crosshair\";\n    }\n  });\n  canvas.addEventListener(\"mouseleave\", function () {\n    document.querySelector(\"main\").style.cursor = \"auto\";\n  });\n}\nconst canvas = document.querySelector(\"canvas\");\nconst ctx = canvas.getContext(\"2d\");\n\nif (!ctx) {\n  throw \"\";\n}\n\nvar width = (canvas.width = window.innerWidth);\nvar height = (canvas.height = window.innerHeight - 36);\nif (isMobile){\n    //reduce processor burden\n    meta.operationLimit = 1000;\n\n    //change canvas height\n    height = (canvas.height = window.innerHeight);\n\n    //hide 'file' options, because they don't work.\n    document.querySelector('#file').style.display = 'none';\n}\n\nctx.setTransform(1, 0, 0, -1, width/2 + 71, height/2);\n\nfunction resetCoordinates() {\n  // reset base canvas.\n  width = canvas.width = window.innerWidth;\n  height = canvas.height = window.innerHeight - 36;\n  ctx.setTransform(1, 0, 0, -1, width / 2 + 71, height / 2);\n\n  boundaries.updateBoundaries();\n\n  //resize and clear all canvases.\n  for (let i = 0; i < fractal.contexts.length; i++) {\n    c = fractal.contexts[i];\n    can = c.canvas;\n    //set width,height\n    can.width = width;\n    can.height = height;\n    //set transform\n    c.setTransform(1, 0, 0, -1, width / 2 + 71, height / 2);\n    //clear\n    clear(c);\n  }\n\n  //reset fractal\n  fractal.resetState();\n}\n// updates dimensions of canvas on window resize.\nwindow.addEventListener(\"resize\", resetCoordinates);\n\n// Real-time state variables\nlet x = 0;\nlet y = 0;\nlet mousedown = false;\nlet mouse = {\n  x: 0,\n  y: 0,\n};\nlet renderInterrupt = false;\n\nlet boundaries = {\n  //used when determining if a drawn object is out of frame\n  top: height / 2,\n  right: width / 2,\n  bottom: -height / 2,\n  left: -width / 2,\n  updateBoundaries: function () {\n    boundaries.top = height / 2;\n    boundaries.right = width - width / 2;\n    boundaries.bottom = -(height - height / 2);\n    boundaries.left = -width / 2;\n  },\n};\n\nfunction pushFractal(start, end, style, drawColor, thickness, fillStyle, fadeVal) {\n  // convenience function. Basically the same as fractal.push, but also populates the actions.undoList\n\n  //push object onto fractal\n  fractal.push(start, end, style, drawColor, thickness, fillStyle, fadeVal);\n\n  // update action list.\n  function undo() {\n    fractal.pop(style);\n    function unundo() {\n      fractal.push(start, end, style, drawColor, thickness, fillStyle, fadeVal);\n      return undo;\n    }\n    return unundo;\n  }\n  actions.undoList.push(undo);\n\n  // reset unundo list, since a new object has been added.\n  actions.unundoList = [];\n}\nfunction mouseupHandler(e) {\n  if (mousedown === false) {\n    return;\n  }\n  // remove the 'moving' object from the fractal\n  fractal.pop(meta.style);\n\n  // create local copies of relevant variables (undo/redo actions rely on a functional programming paradigm, so I need copies saved to local function state.)\n  let start = new Point(x, y);\n  let end = new Point(mouse.x, mouse.y);\n\n  // add to the fractal\n  pushFractal(\n    start,\n    end,\n    meta.style,\n    meta.drawColor,\n    meta.thickness,\n    meta.fillStyle,\n    meta.fadeVal\n  );\n\n  // update state\n  mousedown = false;\n\n  //remove branch indicators\n  if (meta.style == Branch){\n      objectRenderArray.pop();\n      objectRenderArray.pop();\n  }\n}\nfunction mousedownHandler(e) {\n  if (e.button === 0) {\n    // update program state\n    recentlySaved = false;\n    let start = windowToCanvas(e);\n    x = start.x;\n    y = start.y;\n\n    mousedown = true;\n\n    // add to fractal.\n    fractal.push(start, start, meta.style, meta.drawColor, meta.thickness, meta.fillStyle, meta.fadeVal);\n\n    // add scale/rotation indicators to base canvas\n    if (meta.style == Branch){\n        // add circle to canvas\n        let c = new Circle(new Transformation(meta.unit*2*meta.maxScale, 0, 0, meta.unit*2*meta.maxScale, start.x, start.y - meta.maxScale * meta.unit), colorMap.orange, 1);\n        objectRenderArray.push(c);\n\n        // add new line to canvas\n        objectRenderArray.push(new Line(Transformation.generateTransformation3(start, start)));\n    }\n  }\n}\n\nfunction updateMouseCoords(e) {\n  let pt = windowToCanvas(e);\n  mouse.x = pt.x;\n  mouse.y = pt.y;\n}\n// handlers for touch screens - Basically just passes onto the mouse handles, since they already do all the work.\n\nfunction fingerDownHandler(e){\n    e.preventDefault(); \n\n    touch = e.changedTouches[0];\n\n    // update mouse coordinates NOTE: due to differences between 'mousemove' and 'touchmove', I need to manually update mouse coordinates on touchdown.\n    let newp = windowToCanvas(touch);\n    mouse.x = newp.x;\n    mouse.y = newp.y;\n\n    //create new mouse event\n    let event = new MouseEvent(\"mousedown\", {\n        clientX: touch.clientX,\n        clientY: touch.clientY\n    });\n\n    // issue mousedown event\n    canvas.dispatchEvent(event);\n\n    return;\n}\n\nfunction fingerMoveHandler(e){\n\n    touch = e.changedTouches[0];\n\n    let event = new MouseEvent(\"mousemove\", {\n        clientX: touch.clientX,\n        clientY: touch.clientY\n    })\n\n    document.querySelector('body').dispatchEvent(event);\n    return;\n}\nfunction fingerUpHandler(e){\n    e.preventDefault();\n\n    touch = e.changedTouches[0];\n\n    let event = new MouseEvent(\"mouseup\", {\n        clientX: touch.cleintX,\n        clientY: touch.clientY\n    })\n\n    document.querySelector('body').dispatchEvent(event);\n    return\n}\n\ncanvas.addEventListener(\"mousedown\", mousedownHandler);\ndocument.querySelector('body').addEventListener(\"mouseup\", mouseupHandler);\ndocument.querySelector('body').addEventListener(\"mousemove\", updateMouseCoords);\n\ncanvas.addEventListener(\"touchstart\", fingerDownHandler);\ndocument.querySelector('body').addEventListener(\"touchend\", fingerUpHandler);\ndocument.querySelector('body').addEventListener(\"touchmove\", fingerMoveHandler);\n\n// Coordinate transformation from current window to wider system\nfunction windowToCanvas(e) {\n  // inverse of canvas to window.\n  return new Point(\n    e.clientX - width / 2 - 71,\n    -(e.clientY - height / 2)\n  );\n}\n\n// keyboard handlers\nfunction keydownHandler(e) {\n  if (e.ctrlKey) {\n    if (actionObject.ctrl[e.key] !== undefined) {\n      actionObject.ctrl[e.key]();\n    }\n  } else {\n    if (actionObject.noctrl[e.key] !== undefined) {\n      actionObject.noctrl[e.key]();\n    }\n  }\n}\nwindow.addEventListener(\"keydown\", keydownHandler);\n\n//Draw a nice initial fractal.\npushFractal(\n    new Point(0,0),\n    new Point(0,100),\n    Line,\n    meta.drawColor,\n    2,\n    meta.fillStyle,\n    meta.fadeVal\n)\nmeta.style = Branch\nmeta.drawColor = colorMap.lawngreen;\n\n//Object renderer\nobjectRenderArray.push(fractal);\nobjectRenderArray.push(\n  new Circle(new Transformation(10, 0, 0, 10, 0, -5), \"rgb(255,127,39)\")\n);\n\nfunction render(timestamp) {\n  if (!renderInterrupt) {\n    //update state variables\n    if (mousedown) {\n      // remove the last fractal element\n      fractal.pop(meta.style);\n\n      // add a new element\n      let start = new Point(x, y);\n      let end = new Point(mouse.x, mouse.y);\n      fractal.push(\n        start,\n        end,\n        meta.style,\n        meta.drawColor,\n        meta.thickness,\n        meta.fillStyle,\n        meta.fadeVal\n      );\n\n      if (meta.style == Branch){\n          objectRenderArray.pop();\n          objectRenderArray.push(new Line(Transformation.generateTransformation3(start, end, meta.unit, colorMap.black, 0, meta.unit*meta.maxScale), colorMap.orange));\n      }\n    }\n\n    //clear\n    clear(ctx);\n\n    //draw\n    objectRenderArray.forEach((obj) => obj.draw(ctx));\n  }\n  //loop\n  window.requestAnimationFrame(render);\n}\n\n// Final initialization.\ninitializeMenu();\n\nif (startRender) {\n  render();\n}\nif (test) {\n  console.log(`Total time: ${fractalDrawBenchmark()}`);\n}\n"],"names":["isMobile","window","matchMedia","matches","initializeMenu","styleMap","line","Line","circle","Circle","triangle","Triangle","rectangle","Rectangle","hexagon","Hexagon","octagon","Octagon","fourstar","FourStar","fivestar","FiveStar","branch","Branch","grab","numberMap","one","two","three","four","five","six","seven","eight","nine","ten","last","target","document","querySelector","class","thicknessInputMenu_isOpen","menu","thicknessInputMenu1","handler","e","style","display","setAttribute","identifier","getAttribute","parentNode","id","actionObject","ctrl","z","y","resetCoordinates","meta","thickness","fillStyle","save","confirm","setTimeout","location","replace","href","c","undefined","p","colorStyle","color","backgroundColor","colorMap","drawColor","addEventListener","value","Color","slice","hex","fadeVal","canvas1","cursor","canvas","ctx","getContext","width","innerWidth","height","innerHeight","setTransform","boundaries","updateBoundaries","i","fractal","contexts","length","can","clear","resetState","operationLimit","x","mousedown","mouse","renderInterrupt","top","right","bottom","left","pushFractal","start","end","push","actions","undoList","undo","pop","unundoList","mouseupHandler","Point","objectRenderArray","mousedownHandler","button","recentlySaved","windowToCanvas","Transformation","unit","maxScale","orange","generateTransformation3","updateMouseCoords","pt","fingerDownHandler","preventDefault","touch","changedTouches","newp","event","MouseEvent","clientX","clientY","dispatchEvent","fingerMoveHandler","fingerUpHandler","cleintX","keydownHandler","ctrlKey","key","noctrl","render","timestamp","black","forEach","obj","draw","requestAnimationFrame","lawngreen","startRender","test","console","log","fractalDrawBenchmark"],"version":3,"file":"index.4e86a1d8.js.map"}