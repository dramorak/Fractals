var startRender=!0,test=!1,sin=Math.sin,cos=Math.cos,objectRenderArray=[],meta={style:Line,colorStyle:"drawColor",thickness:2,drawColor:new Color(0,0,0),backgroundColor:new Color(255,255,255),fillStyle:"stroke",clrscale:16,fadeVal:.4,renderThreshold:1,maxDepth:100,maxScale:.95,maxSize:1e4,operationLimit:4e3,unit:200},metaCopy={...meta},fractal={objects:[],branches:[],contexts:[],drawState:{opcount:0,i:0,stack:[]},draw:function(){for(;fractal.drawState.i<fractal.objects.length;){for(0==fractal.drawState.stack.length&&(fractal.drawState.stack.push(fractal.objects[fractal.drawState.i]),fractal.drawState.stack.push(0));fractal.drawState.stack.length>0;)if(node=fractal.drawState.stack[fractal.drawState.stack.length-2],i=fractal.drawState.stack[fractal.drawState.stack.length-1],node.size<meta.renderThreshold)fractal.drawState.stack.pop(),fractal.drawState.stack.pop();else if(0==i&&(node.draw(fractal.contexts[fractal.drawState.i]),fractal.drawState.opcount+=node.drawTime),i!=fractal.branches.length){{fractal.drawState.stack[fractal.drawState.stack.length-1]+=1;let t=fractal.branches[i].transformation;fractal.drawState.stack.push(t.apply(node)),fractal.drawState.stack.push(0)}if(fractal.drawState.opcount>=meta.operationLimit)return void(fractal.drawState.opcount=0)}else fractal.drawState.stack.pop(),fractal.drawState.stack.pop();fractal.drawState.opcount=0,fractal.drawState.i+=1}},resetState:function(){fractal.drawState.opcount=0,fractal.drawState.i=0,fractal.drawState.stack=[]},push:function(t,e,a="unspecified",n=black,i=1,o="stroke",r=0){if("unspecified"==a&&(a=meta.style),a==Branch)fractal.contexts.forEach((t=>clear(t))),fractal.resetState(),fractal.branches.push(new Branch(Transformation.generateTransformation1(t,e,meta.unit,n,r)));else{const s=createCanvas();s.setTransform(1,0,0,-1,width/2+71,height/2),fractal.contexts.push(s);let l=new a(Transformation.generateTransformation3(t,e),n,i,o,r);fractal.objects.push(l),l.draw(s)}},pop:function(t="unspecified"){if("unspecified"==t&&(t=meta.style),t===Branch&&fractal.branches.length>0){if(0==fractal.branches.length)return;fractal.branches.pop(),fractal.resetState(),fractal.contexts.forEach((t=>clear(t)))}else{if(0==fractal.objects.length)return;fractal.drawState.i==fractal.objects.length?fractal.drawState.i-=1:fractal.drawState.i==fractal.objects.length-1&&(fractal.drawState.stack=[]),fractal.objects.pop(),fractal.contexts.pop().canvas.remove()}}};let actionObject={ctrl:{z:function(){if(0!=actions.undoList.length){let t=actions.undoList.pop()();actions.unundoList.push(t)}},y:function(){if(0!=actions.unundoList.length){let t=actions.unundoList.pop()();actions.undoList.push(t)}}},noctrl:{}};var actions={undoList:[],unundoList:[]};function Color(t,e,a,n=!1){n?(this.r=hexToDecimal(t),this.g=hexToDecimal(e),this.b=hexToDecimal(a)):(this.r=t,this.b=a,this.g=e)}function Branch(t){this.transformation=t}function Point(t,e){this.x=t,this.y=e}function Shape(t=[],e,a=black,n=1,i="stroke",o=0){this.points=t,this.color=a,this.thickness=n,this.style=i,this.fade=o,this.size=void 0===e?radius(t):e,this.build=function(t){let e=this.points.length-1;t.moveTo(this.points[e].x,this.points[e].y),this.points.forEach((e=>t.lineTo(e.x,e.y)))},this.draw=function(t){let e=this.points[0].x,a=this.points[0].y;e+this.size<=boundaries.left||e-this.size>=boundaries.right||a+this.size<=boundaries.bottom||a-this.size>=boundaries.top||("stroke"===this.style||2===this.points.length?(t.lineWidth=this.thickness,t.strokeStyle=this.color,t.beginPath(),this.build(t),t.stroke()):"fill"===this.style&&(t.fillStyle=this.color,t.beginPath(),this.build(t),t.fill()))}}function Line(t,e=black,a=1,n="stroke",i=0){this.template=[new Point(0,0),new Point(0,1)],this.drawTime=1.5,Shape.call(this,map(this.template,(e=>t.apply(e))),t.size,e,a,n,i),this.build=function(t){t.moveTo(this.points[0].x,this.points[0].y),t.lineTo(this.points[1].x,this.points[1].y)}}function Triangle(t,e=black,a=1,n="stroke",i=0){this.template=[new Point(-.5,0),new Point(.5,0),new Point(0,1)],this.drawTime=3,Shape.call(this,map(this.template,(e=>t.apply(e))),t.size,e,a,n,i)}function Curve(t,e=black,a=1,n="stroke",i=0){}function Oval(t,e=black,a=1,n="stroke",i=0){}function Circle(t,e=black,a=1,n="stroke",i=0){this.template=[new Point(0,.5)],this.drawTime=4,Shape.call(this,map(this.template,(e=>t.apply(e))),t.size,e,a,n,i),this.build=function(t){t.moveTo(this.points[0].x+this.size/2,this.points[0].y),t.arc(this.points[0].x,this.points[0].y,this.size/2,0,2*Math.PI)}}function RightTriangle(t,e=black,a=1,n="stroke"){}function Rectangle(t,e=black,a=1,n="stroke",i=0){this.template=[new Point(-.5,0),new Point(.5,0),new Point(.5,1),new Point(-.5,1)],this.drawTime=4,Shape.call(this,map(this.template,(e=>t.apply(e))),t.size,e,a,n,i)}function Pentagon(t,e=black,a=1,n="stroke"){}function Hexagon(t,e=black,a=1,n="stroke",i=0){this.template=[new Point(0,1),new Point(.433,.75),new Point(.433,.25),new Point(0,0),new Point(-.433,.25),new Point(-.433,.75)],this.drawTime=6,Shape.call(this,map(this.template,(e=>t.apply(e))),t.size,e,a,n,i)}function Septagon(t,e=black,a=1,n="stroke"){}function Octagon(t,e=black,a=1,n="stroke",i=0){this.template=[new Point(-.2071,0),new Point(.2071,0),new Point(.5,.292893),new Point(.5,.7071),new Point(.2071,1),new Point(-.2071,1),new Point(-.5,.7071),new Point(-.5,.292893)],this.drawTime=8,Shape.call(this,map(this.template,(e=>t.apply(e))),t.size,e,a,n,i)}function RoundedRectangle(t,e=black,a=1,n="stroke"){}function Polygon(t,e=black,a=1,n="stroke"){}function RightArrow(t,e=black,a=1,n="stroke"){}function LeftArrow(t,e=black,a=1,n="stroke"){}function UpArrow(t,e=black,a=1,n="stroke"){}function DownArrow(t,e=black,a=1,n="stroke"){}function FourStar(t,e=black,a=1,n="stroke",i=0){this.template=[new Point(0,0),new Point(.125,.375),new Point(.5,.5),new Point(.125,.625),new Point(0,1),new Point(-.125,.625),new Point(-.5,.5),new Point(-.125,.375)],this.drawTime=8,Shape.call(this,map(this.template,(e=>t.apply(e))),t.size,e,a,n,i)}function FiveStar(t,e=black,a=1,n="stroke",i=0){this.template=[new Point(-.306,0),new Point(.002,.218),new Point(.312,0),new Point(.204,.378),new Point(.5,.608),new Point(.122,.618),new Point(0,1),new Point(-.12,.627),new Point(-.5,.604),new Point(-.198,.378)],this.drawTime=10,Shape.call(this,map(this.template,(e=>t.apply(e))),t.size,e,a,n,i)}function SixPointStar(t,e=black,a=1,n="stroke"){}function Transformation(t,e,a,n,i,o,r=black,s=0){this.a=t,this.b=e,this.c=a,this.d=n,this.e=i,this.f=o,this.xscale=(t**2+e**2)**.5,this.yscale=(a**2+n**2)**.5,this.size=Math.max(this.xscale,this.yscale),this.r=r.r,this.g=r.g,this.bl=r.b,this.fade=s}colorMap={black:new Color(0,0,0),grey:new Color(128,128,128),darkred:new Color("8B","00","00",hex=!0),red:new Color("FF","00","00",hex=!0),orange:new Color("FF","45","00",hex=!0),yellow:new Color("FF","FF","00",hex=!0),lawngreen:new Color("7C","FC","00",hex=!0),green:new Color("00","80","00",hex=!0),cadetblue:new Color("5F","9E","A0",hex=!0),blue:new Color("00","00","FF",hex=!0),violet:new Color("EE","82","EE",hex=!0),purple:new Color("80","00","80",hex=!0),cyan:new Color("00","FF","FF",hex=!0),lightsalmon:new Color("FF","A0","7A",hex=!0),lightyellow:new Color("FF","FF","E0",hex=!0),lime:new Color("00","FF","00",hex=!0),mistyrose:new Color("FF","E4","E1",hex=!0),slateblue:new Color("6A","5A","CD",hex=!0),tomato:new Color("FF","63","47",hex=!0),white:new Color("FF","FF","FF",hex=!0)},black=colorMap.black,white=colorMap.white,Color.prototype.toString=function(t=!1){return t?`#${zeroFill(decimalToHex(this.r),2)}${zeroFill(decimalToHex(this.g),2)}${zeroFill(decimalToHex(this.b),2)}`:`rgb(${this.r},${this.g},${this.b})`},Transformation.prototype.apply=function(t){if(clrScale=(t.fade*this.fade)**2,t instanceof Point){let e=t.x,a=t.y;return new Point(this.a*e+this.c*a+this.e,this.d*a+this.b*e+this.f)}if(t instanceof Transformation){var e=t.a,a=t.b,n=t.c,i=t.d,o=t.e,r=t.f;return new Transformation(this.a*e+this.c*a,this.b*e+this.d*a,this.a*n+this.c*i,this.b*n+this.d*i,this.a*o+this.c*r+this.e,this.b*o+this.d*r+this.f,new Color(this.r,this.b,this.g),this.fade)}if(t instanceof Circle){let e=t.color.r+(this.r-t.color.r)*clrScale,a=t.color.g+(this.g-t.color.g)*clrScale,n=t.color.b+(this.bl-t.color.b)*clrScale,i=map(t.points,(t=>this.apply(t))),o=t.size*this.size,r=new Color(e,a,n),s=new Circle(id,r,t.thickness,t.style,t.fade);return s.points=i,s.size=o,s}{let e=t.color.r+(this.r-t.color.r)*clrScale,a=t.color.g+(this.g-t.color.g)*clrScale,n=t.color.b+(this.bl-t.color.b)*clrScale,i=new Shape(map(t.points,(t=>this.apply(t))),t.size*this.size,new Color(e,a,n),t.thickness,t.style,t.fade);return i.drawTime=t.drawTime,i}},Transformation.generateTransformation1=function(t,e,a=1,n=black,i=0){var o={x:e.x-t.x,y:e.y-t.y},r=(o.x**2+o.y**2)**.5,s=Math.atan2(t.y,t.x),l=Math.atan2(o.y,o.x)-s;let c=cos(l),h=sin(l),f=Math.min(r/a,meta.maxScale);return new Transformation(f*c,f*h,-f*h,f*c,t.x,t.y,n,i)},Transformation.generateTransformation2=function(t,e,a,n,i=1,o=black,r=0){let s=sin(t)*e,l=cos(t)*e;return new Transformation(l,s,-s,l,a,n,o,r)},Transformation.generateTransformation3=function(t,e,a=1,n=black,i=0,o=meta.maxSize){let r=e.x-t.x,s=e.y-t.y,l=Math.atan2(s,r)-Math.PI/2,c=Math.min((r**2+s**2)**.5,o);return new Transformation(c*cos(l),c*sin(l),-c*sin(l),c*cos(l),t.x,t.y,n,i)};let id=new Transformation(1,0,0,1,0,0);function clear(t){let e=t.canvas,a=e.width,n=e.height;t.clearRect(-a/2-71,-n/2,a,n)}function createCanvas(){let t=document.createElement("canvas");return t.width=width,t.height=height,document.querySelector("#canvasHolder").appendChild(t),t.getContext("2d")}function zeroFill(t,e){let a=t.toString();for(;a.length<e;)a="0"+a;return a}function filter(t,e){for(var a=[],n=0;n<t.length;n++)e(t[n])&&a.push(t[n]);return a}function map(t,e){for(var a=[],n=0;n<t.length;n++)a[n]=e(t[n]);return a}function radius(t){m=0;for(var e=0;e<t.length;e++)for(var a=e;a<t.length;a++)m=Math.max(m,(n=t[e],i=t[a],Math.max(Math.abs(n.x-i.x),Math.abs(n.y-i.y))));var n,i;return m}function ceiling(t){return-Math.floor(-t)}function cache(t){var e={};return function(){let a=JSON.stringify(arguments);if(void 0===e[a]){let n=t.apply(null,arguments);return e[a]=n,n}return e[a]}}function hexToDecimal(t){let e={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},a=0,n=0;for(;0!==t.length;)a+=16**n*e[t[t.length-1]],n+=1,t=t.slice(0,t.length-1);return a}function decimalToHex(t){let e={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},a="";for(;0!==t;)a=e[t%16]+a,t=Math.floor(t/16);return a}function max(t,e=(t=>t)){if(0==t.length)return[0,-1];let a=e(t[0]),n=0;for(let i=1;i<t.length;i++)e(t[i])>a&&(a=e(t[i]),n=i);return[a,n]}function average(t,e=(t=>t)){if(0==t.length)return 0;let a=0;for(let n=0;n<t.length;n++)a+=e(t[n]);return a/t.length}function knapsack(t,e){var a=1;if(e<=0)return 0;for(var n=0;n<t.length;n++)a+=knapsack(t,e-t[n]);return a}function countNodes(t,e,a){if(0===t.length)return 0===maxSize?0:1;maxSize=max(e,(t=>t.size));let n=a/maxSize,i=[],o=0;for(var r=0;r<t.length;r++){let e=Math.min(100,Math.round(Math.log(n)/Math.log(t[r].transformation.size)));i.push(e),o=Math.max(o,e)}for(r=0;r<t.length;r++)i[r]=Math.floor(o/i[r]);return knapsack(i,o)}function calculateDrawTime(){return 1/60*(fractal.objects.length*countNodes(fractal.branches,fractal.objects,meta.renderThreshold))}function save(){renderInterrupt=!0;const t=createCanvas();t.fillStyle=meta.backgroundColor.toString(),t.fillRect(0,0,width,height);for(let e=0;e<fractal.objects.length;e++)srcImage=fractal.contexts[e].canvas,t.drawImage(srcImage,0,0);t.canvas.toBlob((function(t){var e=URL.createObjectURL(t);window.open(e)}),type="image/png"),t.canvas.remove(),renderInterrupt=!1}knapsack=cache(knapsack);
//# sourceMappingURL=index.69acd817.js.map
